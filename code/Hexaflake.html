<html> <head>  <script type="application/x-javascript">  var canvas;var ctx;var scale = 500;var s0;function draw() {	canvas = document.getElementById("canvas");	ctx = canvas.getContext("2d");	ctx.fillStyle = "rgb(0,0,0)";    canvas.onclick=iter;    //invoke start function here	getStarted()}function getStarted() {  canvas.height = scale+2  canvas.width = Math.sqrt(3)/2*scale+2  h0 = [makeHex([Math.sqrt(3)/4,.5], .5)]  drawPoly(h0[0])}function metaHex(h) {  c = h[0]  dist = calcDist(c, h[1])/3  nH = []  for(k=1; k<h.length; k++) {    a = calcAngle(h[k], c)    nH[k] = makeHex(pFromAPD(a, h[k], dist), dist)  }  nH[0] = makeHex(c, dist)  return nH}function makeHex(c, r) {  vs = []  j = 1  for(i=1/6; i<2; i+=1/3) {    vs[j] = pFromAPD(i*Math.PI, c, r)     j++  }  vs[0] = c  return vs;}function iterate(v, i, a) {  if(typeof(v[0][0]) == "object") {    a[i].forEach(iterate)  }  else {    a[i] = metaHex(v)  }}function drawIterate(v, i, a) {  if(typeof(v[0][0]) == "object") {    v.forEach(drawIterate)  }  else {    drawPoly(v)  }}function drawLine(p1, p2) {  ctx.beginPath();  ctx.moveTo(p1[0]*scale, p1[1]*-scale+scale);  ctx.lineTo(p2[0]*scale, p2[1]*-scale+scale);  ctx.stroke()}function drawPoly(s) {  ctx.beginPath()  ctx.moveTo(s[1][0]*scale, s[1][1]*-scale+scale)  for(i=2; i<s.length; i++)    ctx.lineTo(s[i][0]*scale, s[i][1]*-scale+scale)  ctx.fill()}function pFromAPD(a, p, d) {  //That is, find the two points a given distance away from a given point on a given angle.  x = p[0]  y = p[1]  x2 = d * Math.cos(a) + x  y2 = d * Math.sin(a) + y  return [x2, y2]}function calcAngle(p1, p2) {  return Math.atan2(p2[1]-p1[1], p2[0]-p1[0])}function calcDist(p1, p2) {  return Math.sqrt(sq(p1[0]-p2[0]) + sq(p1[1]-p2[1]))}function sq(v) {  return v*v}function iter() {  ctx.clearRect(0,0,canvas.width,canvas.height)  h0.forEach(iterate)  h0.forEach(drawIterate)}  </script> </head> <body onload="draw()"> 	A demonstration of the <a href="http://en.wikipedia.org/wiki/Hexaflake">Hexaflake</a>. Click to iterate. 	<br><br><br>   <canvas id="canvas" width="1" height="1"></canvas> </body></html>