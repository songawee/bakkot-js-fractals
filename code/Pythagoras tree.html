<html> <head>  <script type="application/x-javascript">  var canvas;var ctx;var scale = 500;var s0;function draw() {	canvas = document.getElementById("canvas");	ctx = canvas.getContext("2d");	ctx.fillStyle = "rgb(0,0,0)";    canvas.onclick=iter;    document.onkeypress=reset;    //invoke start function here	getStarted()}function getStarted() {  canvas.height = 2/3*scale+2  canvas.width = scale+2  s0 = [[[2.5/6,1/6],[3.5/6,1/6],[3.5/6,0],[2.5/6,0]]]  drawSquare(s0[0])}function drawSquare(s) {  ctx.beginPath()  ctx.moveTo(s[0][0]*scale, s[0][1]*-scale+2/3*scale)  ctx.lineTo(s[1][0]*scale, s[1][1]*-scale+2/3*scale)  ctx.lineTo(s[2][0]*scale, s[2][1]*-scale+2/3*scale)  ctx.lineTo(s[3][0]*scale, s[3][1]*-scale+2/3*scale)  ctx.fill()}function iterate(v, i, a) {  if(typeof(v[0][0]) == "object") {    a[i].forEach(iterate)  }  else {    a[i] = newSquares(v,i)    drawSquare(a[i][0])    drawSquare(a[i][1])  }}function newSquares(s, y) {  p1 = s[0]  p2 = s[1]    a = calcAngle(p1, p2)  d = calcDist(p1, p2)    if(!y) {    p11 = pFromAPD(a+3*Math.PI/4, p1, Math.sqrt(2)/2*d)    p12 = pFromAPD(a+Math.PI/2, p1, d)    p13 = pFromAPD(a+Math.PI/4, p1, Math.sqrt(2)/2*d)    s1 = [p11, p12, p13, p1]      p21 = pFromAPD(a+Math.PI/4, p2, Math.sqrt(2)/2*d)    p22 = pFromAPD(a+Math.PI/2, p2, d)    p23 = pFromAPD(a+3*Math.PI/4, p2, Math.sqrt(2)/2*d)    s2 = [p21, p22, p23, p2]  }  else {    p11 = pFromAPD(a-3*Math.PI/4, p1, Math.sqrt(2)/2*d)    p12 = pFromAPD(a-Math.PI/2, p1, d)    p13 = pFromAPD(a-Math.PI/4, p1, Math.sqrt(2)/2*d)    s2 = [p11, p12, p13, p1]      p21 = pFromAPD(a-Math.PI/4, p2, Math.sqrt(2)/2*d)    p22 = pFromAPD(a-Math.PI/2, p2, d)    p23 = pFromAPD(a-3*Math.PI/4, p2, Math.sqrt(2)/2*d)    s1 = [p21, p22, p23, p2]  }    return [s1, s2]}function pFromAPD(a, p, d) {  //That is, find the two points a given distance away from a given point on a given angle.  x = p[0]  y = p[1]  x2 = d * Math.cos(a) + x  y2 = d * Math.sin(a) + y  return [x2, y2]}function calcAngle(p1, p2) {  return Math.atan2(p2[1]-p1[1], p2[0]-p1[0])}function calcDist(p1, p2) {  return Math.sqrt(sq(p1[0]-p2[0]) + sq(p1[1]-p2[1]))}function sq(v) {  return v*v}function reset(e) {  if(String.fromCharCode(e.which)=="s") {    scale = prompt('Set the scale to...', scale)*1  }  if(String.fromCharCode(e.which)=="r" || String.fromCharCode(e.which)=="s") {    ctx.clearRect(0,0,canvas.width,canvas.height)    getStarted();  }}function iter() {  s0.forEach(iterate)}  </script> </head> <body onload="draw()"> 	A demonstration of the <a href="http://en.wikipedia.org/wiki/Pythagoras_tree_(fractal)">Pythagoras tree</a>. Click to iterate. 	<br><br><br>   <canvas id="canvas" width="1" height="1"></canvas> </body></html>