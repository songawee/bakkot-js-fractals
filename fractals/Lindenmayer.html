<html> <head>  <script type="application/x-javascript">function tweak() {  function tfunc(t) {    return function(){t.tick()}  }  var prot = CanvasRenderingContext2D.prototype  prot._clearRect = prot.clearRect  prot.clearRect = function(x, y, a, b){this.clist=[]; this._clearRect(x,y,a,b)} //special    prot._beginPath = prot.beginPath  prot.beginPath = function(){}  prot._moveTo = prot.moveTo  prot.moveTo = function(x, y){this.curp = [x,y]}  prot._lineTo = prot.lineTo  prot.lineTo = function(x, y){this.clist.push("lT(" + this.curp[0] + "," + this.curp[1] +  ";" + x + "," + y + ")"); this.curp = [x,y]; this.tick(true)}  prot._closePath = prot.closePath  prot.closePath = function(){}  prot._stroke = prot.stroke  prot.stroke = function(){}    prot.curp = [0,0]  prot.ticklength = 100  prot.skipfactor=1  prot.running = false  prot.clist = []    prot.tick = function(s){    if(s && !this.running) {       this.running = true       setTimeout(tfunc(this), 1)    }    else if(!s) {      var nc = this.clist.pop()      if(nc.match("lT")) {        var afore = nc.match(/\(([^;]*);/)[1].split(",").map(function(x){return 1*x})        var after = nc.match(/;([^\)]*)\)/)[1].split(",").map(function(x){return 1*x})        this._beginPath()        this._moveTo(afore[0], afore[1])        this._lineTo(after[0], after[1])        this._closePath()        this._stroke()                if(this.clist.length>0) {          if(this.skipfactor==-1) this.tick()          if(Math.floor(Math.random()*this.skipfactor)==0) setTimeout(tfunc(this), this.ticklength)          else this.tick()        }        else this.running = false      }      else {        if(this.clist.length>0) {          this.tick()        }        else this.running = false      }          }  }    }tweak()      var canvas;var ctx;var scale = 550;var n = 0;function LOb(name, xi, yi, ndis, na, ang, si, lut) {  this.name = name;  this.xi = xi;  this.yi = yi;  this.ndis = ndis;  this.na = na;  this.ang = ang;  this.si = si;  this.lut = lut;  this.s = si;  this.dis = this.ndis();}var data = [new LOb("penrose", .5, .5, function(){return 1/(2*Math.pow(1.65,n));}, function(){return (60*Math.PI/180);}, 36*Math.PI/180, "[7]++[7]++[7]++[7]++[7]", {"F":"", "6":"8F++9F----7F[-8F----6F]++", "7":"+8F--9F[---6F--7F]+", "8":"-6F++7F[+++8F++9F]-", "9":"--8F++++6F[+9F++++7F]--7F"}),new LOb("weed", .05, .05, function(){return 1/(2.4*Math.pow(2,n));}, function(){return (60*Math.PI/180);}, 25*Math.PI/180, "X", {"X":"F-[[X]+X]+F[+FX]-X", "F":"FF"}),new LOb("krose", .16, .15, function(){return 1/(1.5*Math.pow(3.1622776601683795,n));}, function(){return (-n/Math.PI);}, 90*Math.PI/180, "F-F-F-F", {"F":"FF-F-F-F-F-F+F"}),new LOb("bush", .35, .05, function(){return 1/(2.5*(Math.pow(2.2,n)+1));}, function(){return (60*Math.PI/180);}, 23*Math.PI/180, "F", {"F":"FF-[-F+F+F]+[+F-F-F]"}),new LOb("fern", .5, .0, function(){return 1/(2*(Math.pow(2,n)+1));}, function(){return (90*Math.PI/180);}, 18*Math.PI/180, "X", {"F":"FF", "X":"F[+X]F[-X]+X"}),new LOb("dragon", .25, .5, function(){return 1/(1.7*Math.pow(Math.sqrt(2),n));}, function(){return (n*45*Math.PI/180);}, 90*Math.PI/180, "FX", {"F":"", "X":"FX+FY", "Y":"FX-FY"}),new LOb("temple", .75, .5, function(){return 1/(4*Math.pow(1.7,n));}, function(){return (180*Math.PI/180);}, 90*Math.PI/180, "WZYX", {"F":"", "X":"++F--Y-F+Z++F--Y-F+Z", "Y":"++F--Y+F-X", "Z":"FW+F-X", "W":"FW+F-XFW-F+Z"}),new LOb("cross", .5, .4, function(){return 1/(4*Math.pow(2.1,n));}, function(){return (180*Math.PI/180);}, 90*Math.PI/180, "FX", {"F":"", "X":"FX+FX+FXFY-FY-", "Y":"+FX+FXFY-FY-FY"}),new LOb("squew", 0, .5, function(){return 1/(1*Math.pow(4,n));}, function(){return (0*Math.PI/180);}, Math.PI/2, "F", {"F":"F+F-F-FF+F+F-F"}),new LOb("hilbert", 0, 0, function(){return 1/(1*Math.pow(2,n));}, function(){return (0*Math.PI/180);}, Math.PI/2, "X", {"F":"F", "X":"-YF+XFX+FY-", "Y":"+XF-YFY-FX+"}),new LOb("curvy", .01, .5, function(){return 1/(2.1*Math.pow(1.44,n))}, function(){return 0*Math.PI/180}, 45*Math.PI/180, "L--F--L--F", {"F":"F", "L":"+R-F-R+", "R":"-L+F+L-"}),new LOb("tri", 0, .5, function(){return 1/(1*Math.pow(2.35,n))}, function(){return 0*Math.PI/180}, 360/45*Math.PI/180, "F", {"F":"F----------F++++++++++++++++++++F----------F"}),new LOb("squar", .15, .15, function(){return 1/(1.5*Math.pow(2.24,n))}, function(){return -n*Math.PI/6.8}, 360/4*Math.PI/180, "F-F-F-F-", {"F":"F-FF--F-F"}),new LOb("seirp", .25, .5, function(){return 1/(1.8*Math.pow(2,n))}, function(){return 0*Math.PI/180}, 360/6*Math.PI/180, "YF", {"X":"YF+XF+Y", "Y":"XF-YF-X"}),new LOb("seirp2", 0, .1, function(){return 1/(2*Math.pow(2,n))}, function(){return 0*Math.PI/180}, 360/3*Math.PI/180, "FXF-FF-FF", {"F":"FF", "X":"-FXF+FXF+FXF-"}),new LOb("fass2", 0, 0, function(){return 1/(1*Math.pow(4,n))}, function(){return 0*Math.PI/180}, 360/4*Math.PI/180, "-L", {"L":"LFLF+RFR+FLFL-FRF-LFL-FR+F+RF-LFL-FRFRFR+", "R":"-LFLFLF+RFR+FL-F-LF+RFR+FLF+RFRF-LFL-FRFR"}),new LOb("flowsnake", .05, .3, function(){return 1/(1.15*Math.pow(2.7,n))}, function(){return -(.66*n)*Math.PI/6}, 360/6*Math.PI/180, "FL", {"L":"FL-FR--FR+FL++FLFL+FR-", "R":"+FL-FRFR--FR-FL++FL+FR", "F":""}),new LOb("peano1", .25, .25, function(){return 1/(2*Math.pow(3,n))}, function(){return 0*Math.PI/180}, 360/4*Math.PI/180, "F-F-F-F", {"F":"F-F+F+F+F-F-F-F+F"}),new LOb("peano3", 0, 1, function(){return 1/(1*Math.pow(3,n))}, function(){return 0*Math.PI/180}, 360/4*Math.PI/180, "X", {"X":"XFYFX+F+YFXFY-F-XFYFX", "Y":"YFXFY-F-XFYFX+F+YFXFY"}),new LOb("quadgopher", 0, 0, function(){return 1/(1*Math.pow(5,n))}, function(){return 0*Math.PI/180}, 360/4*Math.PI/180, "-FR", {"L":"FLFL-FR-FR+FL+FL-FR-FRFL+FR+FLFLFR-FL+FR+FLFL+FR-FLFR-FR-FL+FL+FRFR-", "R":"+FLFL-FR-FR+FL+FLFR+FL-FRFR-FL-FR+FLFRFR-FL-FRFL+FL+FR-FR-FL+FL+FRFR", "F":""}),new LOb("quadkoch", .25, .25, function(){return 1/(2*Math.pow(6,n))}, function(){return 0*Math.PI/180}, 360/4*Math.PI/180, "F-F-F-F-", {"F":"F+FF-FF-F-F+F+FF-F-F+F+FF+FF-F"}),new LOb("quartet", .05, .6, function(){return 1/(1.5*Math.pow(2.35,n))}, function(){return -1/8*n*Math.PI}, 360/4*Math.PI/180, "FB", {"A":"FBFA+HFA+FB-FA", "B":"FB+FA-FB-JFBFA","F":"","H":"-","J":"+"}),new LOb("mytree", 0, .5, function(){return 1/(1.5*Math.pow(2,n))}, function(){return 0*Math.PI/180}, 360/16*Math.PI, "++++F", {"F":"FF-[XY]+[XY]","X":"+FY","Y":"-FX"}),new LOb("Plant01", .5, 0, function(){return 1/(1*Math.pow(3,n))}, function(){return 90*Math.PI/180}, 360/14*Math.PI/180, "F", {"F":"F[+F]F[-F]F"}),new LOb("P2", .5, 0, function(){return 1/(1.5*Math.pow(2.35,n))}, function(){return 90*Math.PI/180}, 360/18*Math.PI/180, "F", {"F":"F[+F]F[-F][F]"}),new LOb("p5", .5, 0, function(){return 1/(2*Math.pow(2,n))}, function(){return 90*Math.PI/180}, 360/14*Math.PI/180, "X", {"X":"F[+X][-X]FX", "F":"FF"}),new LOb("p7", .5, 0, function(){return 1/(2*Math.pow(2,n))}, function(){return 90*Math.PI/180}, 360/14*Math.PI/180, "Z", {"Z":"ZFX[+Z][-Z]", "X":"X[-FFF][+FFF]FX"}),new LOb("p8", .5, 0, function(){return 1/(7*Math.pow(1.2,n))}, function(){return 90*Math.PI/180}, 360/20*Math.PI/180, "SLFFF", {"S":"[+++Z][---Z]TS", "Z":"+H[-Z]L", "H":"-Z[+H]L", "T":"TL", "L":"[-FFF][+FFF]F"}),new LOb("p10", .5, 0, function(){return 1/(1.5*Math.pow(3,n))}, function(){return 90*Math.PI/180}, 360/10*Math.PI/180, "F", {"F":"F[+FF][-FF]F[+FF][-FF]F"}),new LOb("p11", .5, 0, function(){return 1/(1*Math.pow(3,n))}, function(){return 90*Math.PI/180}, 360/12*Math.PI/180, "F", {"F":"F[+F[+F][-F]F][-F[+F][-F]F]F[+F][-F]F"}),new LOb("wwork", .12, .3, function(){return 1/(7.6*Math.pow(2.3,n))}, function(){return 0*Math.PI/180}, 360/6*Math.PI/180, "X", {"F":"FF", "X":"-FXF+FXF+FXF-"}),new LOb("box", .02, .02, function(){return 1/(1.05*Math.pow(3,n))}, function(){return 0*Math.PI/180}, 360/4*Math.PI/180, "F-F-F-F", {"F":"F-F+F+F-F"})]//var cl = tri;function draw() {	canvas = document.getElementById("canvas");	ctx = canvas.getContext("2d");  canvas.height = 1*scale+6  canvas.width = 1*scale+6	//ctx.strokeStyle = "rgb(0,127,0)";	  canvas.onclick=iter;  document.onkeypress=keyp;  pres = document.getElementById("pres");  pres.addEventListener("change", changedList, true)  pres.innerHTML=""  for(var i=0; i<data.length; i++) {    pres.innerHTML+="<option>" + (i+1) + " - " + data[i].name + "<\/option>\n"  }  pres.selectedIndex=data.length-1  changedList()	getStarted();}function getStarted() {  drawS();}function produce(s, lut) {  var o = "";  for(var i=0; i<s.length; i++) {    if(typeof(lut[s[i]])!="undefined") {  //variables      o+=lut[s[i]];    }    else { //constants, ie, all symbols which aren't variables      o+=s[i];    }  }  return o;}var pstack = [];var astack = [];function drawS() {  var a = cl.na();  var s = cl.s;  var t;  var x = cl.xi;  var y = cl.yi;  ctx.beginPath();  ctx.moveTo(x*scale+2, y*-scale+scale+2);  for(var i=0; i<s.length; i++) {    switch(s[i]) {      case "X":        break;      case "F":        t=pFromAPD(a, [x,y], cl.dis);        x=t[0];        y=t[1];        ctx.lineTo(x*scale+2, y*-scale+scale+2);        break;      case "+":        a-=cl.ang;        break;      case "-":        a+=cl.ang;        break;      case "[":        pstack.push([x,y].clone());        astack.push(a);        break;      case "]":        t=pstack.pop();        x=t[0];        y=t[1];        a=astack.pop();        ctx.moveTo(x*scale+2, y*-scale+scale+2);        break;    }  }  ctx.stroke();  //ctx.closePath();}function pFromAPD(a, p, d) {  //That is, find the two points a given distance away from a given point on a given angle.  var x = p[0]  var y = p[1]  var x2 = d * Math.cos(a) + x  var y2 = d * Math.sin(a) + y  return [x2, y2]}function calcAngle(p1, p2) {  return Math.atan2(p2[1]-p1[1], p2[0]-p1[0]);}function calcDist(p1, p2) {  return Math.sqrt(sq(p1[0]-p2[0]) + sq(p1[1]-p2[1]));}function sq(v) {  return v*v}function keyp(e) {  if(e.meta) return;  if(String.fromCharCode(e.which)=="s") {    scale = prompt('Set the scale to...', scale)*1    canvas.width = scale+5;    canvas.height = scale+5;  }  if(String.fromCharCode(e.which)=="r" || String.fromCharCode(e.which)=="s") {    reset()  }}function reset() {  ctx.clearRect(0,0,canvas.width+10,canvas.height+10);  n=0;  cl.s=cl.si;  cl.dis=cl.ndis();  getStarted();}function changedList() {  cl = data[pres.selectedIndex]  reset()}function iter() {  ctx.clearRect(0,0,canvas.width+10,canvas.height+10);  cl.s=produce(cl.s, cl.lut);  n++;  cl.dis = cl.ndis();  drawS();}function button() {  ctx.clearRect(0,0,canvas.width+10,canvas.height+10);  ctx.ticklength = document.getElementById("tbox").value*1  ctx.skipfactor = document.getElementById("sbox").value*1  drawS();}Object.prototype.clone = function(){  var newObj = (this instanceof Array) ? [] : {};  for (var i in this) {    if (i == 'clone') continue;    if (this[i] && typeof this[i] == "object") {      newObj[i] = this[i].clone();    } else newObj[i] = this[i]  } return newObj;};  </script> </head> <body onload="draw()"> 	A demonstration of <a href="http://en.wikipedia.org/wiki/L-system">L-systems</a>. Click to iterate. If drawing is too slow, decrease tick length or increase skip factor and redraw. Sometimes it gets stuck - just reload. 	<br><br><br>   <canvas id="canvas" width="1" height="1"></canvas><br><br>      <form>   <select id='pres'></select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Tick length: <input id="tbox" size=6 value=100 />&nbsp;&nbsp;&nbsp;   Skip factor: <input id="sbox" size=6 value=1 />&nbsp;&nbsp;&nbsp;   <input type="button" onclick="button()" value="Redraw" /> </body></html>