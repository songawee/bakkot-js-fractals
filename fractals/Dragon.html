<html> <head>  <script type="application/x-javascript">  var canvas;var ctx;var scale = 450;var s0;function draw() {	canvas = document.getElementById("canvas");	ctx = canvas.getContext("2d");	ctx.fillStyle = "rgb(0,0,0)";    canvas.onclick=iter;    document.onkeypress=reset;    //invoke start function here	getStarted()}function getStarted() {  canvas.height = 1*scale+2  canvas.width = 1.5*scale+2  l0 = [[[1/3,1/3],[5/6,5/6],[4/3,1/3]]]  l0.forEach(drawIterate)}function iterate(v, i, a) {  if(typeof(v[0][0]) == "object") {    a[i].forEach(iterate)  }  else {    a[i] = newPs(v)  }}function drawIterate(v, i, a) {  if(typeof(v[0][0]) == "object") {    v.forEach(drawIterate)  }  else {    drawLine(v[0], v[1])    drawLine(v[1], v[2])  }}function drawLine(p1, p2) {  ctx.beginPath();  ctx.moveTo(p1[0]*scale, p1[1]*-scale+scale);  ctx.lineTo(p2[0]*scale, p2[1]*-scale+scale);  ctx.stroke()}function newPs(ps) {  p1 = ps[0]  p2 = ps[1]  p3 = ps[2]  d = calcDist(p1, p2)    a1 = calcAngle(p1, p2) + Math.PI/4  a2 = calcAngle(p2, p3) - Math.PI/4    np1 = pFromAPD(a1, p1, d*Math.sqrt(2)/2)  np2 = pFromAPD(a2, p2, d*Math.sqrt(2)/2)    return [[p1, np1, p2],[p2, np2, p3]]}function pFromAPD(a, p, d) {  //That is, find the two points a given distance away from a given point on a given angle.  x = p[0]  y = p[1]  x2 = d * Math.cos(a) + x  y2 = d * Math.sin(a) + y  return [x2, y2]}function calcAngle(p1, p2) {  return Math.atan2(p2[1]-p1[1], p2[0]-p1[0])}function calcDist(p1, p2) {  return Math.sqrt(sq(p1[0]-p2[0]) + sq(p1[1]-p2[1]))}function sq(v) {  return v*v}function reset(e) {  if(String.fromCharCode(e.which)=="s") {    scale = prompt('Set the scale to...', scale)*1  }  if(String.fromCharCode(e.which)=="r" || String.fromCharCode(e.which)=="s") {    ctx.clearRect(0,0,canvas.width,canvas.height)    getStarted();  }}function iter() {  ctx.clearRect(0,0,canvas.width,canvas.height)  l0.forEach(iterate)  l0.forEach(drawIterate)}  </script> </head> <body onload="draw()"> 	A demonstration of the <a href="http://en.wikipedia.org/wiki/Dragon_curve#Heighway_dragon">Heighway dragon</a>. Click to iterate. 	<br><br><br>   <canvas id="canvas" width="1" height="1"></canvas> </body></html>